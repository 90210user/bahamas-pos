{% extends 'base.html' %}
{% block content %}
<h4 class="mb-2">Dashboard</h4>
<form class="mb-4" method="get" action="{{ url_for('dashboard') }}">
  <div class="input-group">
    <input class="form-control" type="text" name="q" placeholder="Search stock, transactions, customers..." value="{{ request.args.get('q','') }}" />
    <button class="btn btn-accent">Search</button>
  </div>
  {% if search_results is defined %}
    <div class="mt-3">
      {% if search_results %}
      <div class="small text-muted mb-1">Results:</div>
      <ul class="list-group">
        {% for r in search_results %}
          <li class="list-group-item">{{ r }}</li>
        {% endfor %}
      </ul>
      {% else %}
      <div class="alert alert-info mt-2">No results found.</div>
      {% endif %}
    </div>
  {% endif %}
</form>
<div class="row g-3">
  <div class="col-12 col-md-6 col-lg-3">
    <div class="p-3 glass">
      <div class="small text-muted">Total Sales</div>
      <div class="fs-4 fw-bold">KES {{ '%.2f'|format(summary.total_sales) }}</div>
    </div>
  </div>
  <div class="col-12 col-md-6 col-lg-3">
    <div class="p-3 glass">
      <div class="small text-muted">Total Credits</div>
      <div class="fs-4 fw-bold">KES {{ '%.2f'|format(summary.total_credits) }}</div>
    </div>
  </div>
  <div class="col-12 col-md-6 col-lg-3">
    <div class="p-3 glass">
      <div class="small text-muted">Total Expenses</div>
      <div class="fs-4 fw-bold">KES {{ '%.2f'|format(summary.total_expenses) }}</div>
    </div>
  </div>
  <div class="col-12 col-md-6 col-lg-3">
    <div class="p-3 glass">
      <div class="small text-muted">Net Profit</div>
      <div class="fs-4 fw-bold">KES {{ '%.2f'|format(summary.system_balance) }}</div>
    </div>
  </div>
</div>
{% endblock %}



