<!doctype html>
<html lang="en" data-theme="{{ theme }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ app_title }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      :root[data-theme='light'] { --bg: #f3f6fb; --panel: rgba(255,255,255,0.6); --text: #1f2937; --accent:#3b82f6; }
      :root[data-theme='dark'] { --bg: #0f172a; --panel: rgba(30,41,59,0.55); --text: #e5e7eb; --accent:#60a5fa; }
      body { background: var(--bg); color: var(--text); font-family: "Segoe UI", Roboto, Inter, Arial, sans-serif; }
      .glass { backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); background: var(--panel); border-radius: 16px; box-shadow: 0 8px 30px rgba(0,0,0,0.12); }
      a { color: var(--text); text-decoration: none; }
      .sidebar a:hover { color: var(--accent); }
      .btn-accent { background: var(--accent); color: white; }
      .table-hover tbody tr:hover { background-color: rgba(59,130,246,0.08); }
    </style>
  </head>
  <body>
    <div class="container-fluid py-3">
      <div class="row g-3">
        <aside class="col-12 col-md-3 col-lg-2">
          <div class="glass p-3 sidebar">
            <h5 class="mb-3">BAHAMAS POS</h5>
            {% if current_user %}<div class="mb-2 small">Logged in as: {{ current_user.username }} ({{ current_user.role }})</div>{% endif %}
            <nav class="nav flex-column gap-2">
              <a class="nav-link" href="{{ url_for('dashboard') }}">🏠 Dashboard</a>
              <a class="nav-link" href="{{ url_for('add_stock') }}">➕ Add Stock</a>
              <a class="nav-link" href="{{ url_for('record_sale') }}">🛒 Record Sale</a>
              <a class="nav-link" href="{{ url_for('record_expense') }}">💰 Record Expense</a>
              <a class="nav-link" href="{{ url_for('manage_credits') }}">💳 Credits</a>
              <a class="nav-link" href="{{ url_for('view_transactions') }}">📋 Transactions</a>
              <a class="nav-link" href="{{ url_for('reports_page') }}">📊 Reports</a>
              {% if current_user %}<a class="nav-link" href="{{ url_for('logout') }}">🚪 Logout</a>{% endif %}
            </nav>
            <form class="mt-3" method="post" action="{{ url_for('toggle_theme') }}">
              <input type="hidden" name="theme" value="{{ 'dark' if theme=='light' else 'light' }}" />
              <button class="btn btn-sm w-100 btn-accent">Switch to {{ 'Dark' if theme=='light' else 'Light' }} Mode</button>
            </form>
          </div>
        </aside>
        <main class="col-12 col-md-9 col-lg-10">
          <div class="glass p-4">
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                <div class="mb-3">
                  {% for cat, msg in messages %}
                    <div class="alert alert-{{ 'success' if cat=='success' else 'danger' }} mb-2" role="alert">{{ msg }}</div>
                  {% endfor %}
                </div>
              {% endif %}
            {% endwith %}
            {% block content %}{% endblock %}
          </div>
        </main>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
  </html>



